# monty-hall-problem-simulator


![](https://img.shields.io/badge/Java-007396.svg?logo=Java&style=plastic)
![](https://img.shields.io/badge/Gradle-02303A.svg?logo=Gradle&style=plastic)


## What

[モンティ・ホール問題](https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%B3%E3%83%86%E3%82%A3%E3%83%BB%E3%83%9B%E3%83%BC%E3%83%AB%E5%95%8F%E9%A1%8C)のシミュレーターを実装しました。

モンティ・ホール問題について簡単に説明します。

登場人物として、司会者とプレイヤーが1人ずついます。
3つの閉じたドアがあります。その内1つのドアの後ろに景品があり、残りはハズレです。

プレイヤーは当たりのドアを予想します。
司会者は残りのドアの内、ハズレのドアを1つ開けます。
ここでプレイヤーに予想を変更するチャンスが与えられます。

プレイヤーにとって、最初に予想したドアを開けるか、予想を変更して余りのドアを開けるかの2択です。

多くの人は直感的に開けるドアを変更してもしなくても、勝率は五分五分だと考えました。
モンティ・ホール問題の結論は、 ***開けるドアを変更することで勝率が2倍になる*** です。

初めてこの問題を知った時、おもしろいなと思い、実際にプログラムを組んで確認しました。


## 実行結果

ゲームを10,000回実行した時の実行結果です。
実行する度に誤差が生じますが、一番きれいな結果出た時を選びましたw

```
3 doors - 10,000 games
KeepMan:	 win% = 33%	 lose% = 67%	 changed%[@win] = 0%
ChangeMan:	 win% = 67%	 lose% = 33%	 changed%[@win] = 100%
RandomMan:	 win% = 50%	 lose% = 50%	 changed%[@win] = 67%
SwitchMan:	 win% = 50%	 lose% = 50%	 changed%[@win] = 67%
```

* 1行目は見出しです。2行目以降は、各行が各プレイヤーの結果を示しています。
* `changed%[@win]`
   * 勝利時における 開けるドアを変更した回数
   * 負けた時の結果は含まれないことに留意して下さい。
* `KeepMan`
   * 常に開けるドアを変更するプレイヤーです。
* `ChangeMan`
   * 常に開けるドアを変更しないプレイヤーです。
* `RandomMan`
   * 開けるドアを変更するか否かをランダムで決めるプレイヤーです。
* `SwitchMan`
   * 開けるドアを変更するか否かを規則正しく交互に決めるプレイヤーです。

### 実行結果の解説
* `ChangeMan`と`KeepMan`の比較

  `ChangeMan`と`KeepMan`の勝率を比較すると、`KeepMan`の勝率が約2倍です。
モンティ・ホール問題の結論の正しさがわかります。

* `RandomMan`の結果

  `RandomMan`の結果をみます。
  最終局面のドアを変更するか否かだけに着目すると、2択なので直感の通り勝率は五分五分です。
  多くの人が誤解するは、`RandomMan`の勝率しか考慮に入れていないからだと思います。

  着目すべきは`changed%[@win]`が *67%* である点です。
  勝利した時の *67%* は、ドアを変更していました。
  言い方を変えると、ドアを変更したことによる勝率が *67%* です。
  ドアを変更しなかったことによる勝率は *33%* です。
  この結果からも、モンティ・ホール問題の結論の正しさがわかります。

* `SwitchMan`の結果

  直感的に`SwitchMan`は確率的な観点では`RandomMan`と同じと予想していましたが、その通りの結果でした。

* なぜドアを変更すると勝率が2倍になるのか

  プレイヤーが最初に選んだドアが当たりである確率は素直に考えて 1/3、ハズレである確率は 2/3 です。
  その情報を考慮して勝率を計算します。

　 まずは、プレイヤーが最初に選んだドアが当たりだった場合と、ハズレだった場合で場合分けをします。

  ```
  【プレイヤーが最初に選んだドアが当たりだった場合 = 1/3】
    ドアを変更しない場合の勝率 = 1/1 = 100%
    ドアを変更する場合の勝率 = 0/1 = 0%

  【プレイヤーが最初に選んだドアがハズレだった場合 = 2/3】
    ドアを変更しない場合の勝率 = 0/1 = 0%
    ドアを変更する場合の勝率 = 1/1 = 100%
  ```

上記で場合分けした計算結果を「ドアを変更するか否か」で勝率をまとめると、次の通りです。

  ```
  【ドアを変更しない場合の勝率】
  100% x 1/3 + 0% x 2/3 ≒ 33%
  【ドアを変更する場合の勝率】
  0% x 1/3 + 100% x 2/3 ≒ 67%
  ```

* 直感による勘違いの理由

  最初に選択したドアが当たりであるか否かの確率を無視して、最後に残ったドアの2択だけを考慮するからだと思います。


## Build
* Given
  * Java 11 or later

* Mac

  ```
  $ ./gradlew build
  ```

* Windows

  ```
  $ gradlew.bat build
  ```


## Execute

```
$ java -jar build/libs/monty-hall-problem-simulator.jar
```
